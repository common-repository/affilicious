!function n(l,o,u){function s(t,e){if(!o[t]){if(!l[t]){var a="function"==typeof require&&require;if(!e&&a)return a(t,!0);if(c)return c(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var r=o[t]={exports:{}};l[t][0].call(r.exports,function(e){return s(l[t][1][e]||e)},r,r.exports,n,l,o,u)}return o[t].exports}for(var c="function"==typeof require&&require,e=0;e<u.length;e++)s(u[e]);return s}({1:[function(e,t,a){"use strict";var r=function(){function i(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,a){return t&&i(e.prototype,t),a&&i(e,a),e}}();function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}jQuery(function(e){var a=window.carbon;if(void 0===a.fields)return!1;var s=function(){function e(){n(this,e)}return r(e,null,[{key:"getContainerView",value:function(){var t=null;return _.each(a.views,function(e){e.model&&e.model.attributes&&e.model.attributes.title==affProductTranslations.container&&(t=e)}),t}},{key:"getVariantsView",value:function(){var t=null;return _.each(a.views,function(e){e.templateVariables&&"_affilicious_product_variants"==e.templateVariables.base_name&&(t=e)}),t}},{key:"getTypeView",value:function(){var t=null;return _.each(a.views,function(e){e.templateVariables&&"_affilicious_product_type"==e.templateVariables.base_name&&(t=e)}),t}},{key:"getEnabledAttributesView",value:function(){var t=null;return _.each(a.views,function(e){e.templateVariables&&"_affilicious_product_enabled_attributes"==e.templateVariables.base_name&&(t=e)}),t}},{key:"getVariantEnabledAttributesViews",value:function(){var t=[];return _.each(a.views,function(e){e.templateVariables&&"enabled_attributes"==e.templateVariables.base_name&&t.push(e)}),t}}]),e}(),t=function(){function i(){n(this,i);var e=s.getTypeView(),t=s.getVariantsView(),a=s.getEnabledAttributesView();e&&(e.$el.ready(this.toggleTabs),e.model.on("change:value",this.toggleTabs)),t&&(t.$el.ready(this.toggleAttributes),t.model.on("change:value",this.toggleAttributes)),a&&(a.$el.ready(this.toggleAttributes),a.model.on("change:value",this.toggleAttributes))}return r(i,[{key:"toggleTabs",value:function(){var e=s.getContainerView(),t=s.getTypeView().model.get("value"),a=e.$el.find('a[data-id="'+affProductTranslations.variants.trim().toLowerCase()+'"]').parent(),i=e.$el.find('a[data-id="'+affProductTranslations.shops.trim().toLowerCase()+'"]').parent();"complex"===t?(a.show(),i.hide()):(a.hide(),i.show())}},{key:"toggleAttributes",value:function(){var e=s.getEnabledAttributesView(),t=s.getVariantEnabledAttributesViews(),a=e.model.get("value"),i=!0,r=!1,n=void 0;try{for(var l,o=t[Symbol.iterator]();!(i=(l=o.next()).done);i=!0){var u=l.value;u.model.set("value",a),u.$el.find("input").val(a)}}catch(e){r=!0,n=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw n}}}}]),i}();window.affiliciousProduct=new t}),jQuery(function(a){var t,r=a("#product_image_gallery"),n=a("#product_images_container").find("ul.product_images");a(".add_product_images").on("click","a",function(e){var i=a(this);e.preventDefault(),t||(t=wp.media.frames.product_gallery=wp.media({title:i.data("choose"),button:{text:i.data("update")},states:[new wp.media.controller.Library({title:i.data("choose"),filterable:"all",multiple:!0})]})).on("select",function(){var e=t.state().get("selection"),a=r.val();e.map(function(e){if((e=e.toJSON()).id){a=a?a+","+e.id:e.id;var t=e.sizes&&e.sizes.thumbnail?e.sizes.thumbnail.url:e.url;n.append('<li class="image" data-attachment_id="'+e.id+'"><img src="'+t+'" /><ul class="actions"><li><a href="#" class="delete" title="'+i.data("delete")+'">'+i.data("text")+"</a></li></ul></li>")}}),r.val(a)}),t.open()}),n.sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(e,t){t.item.css("background-color","#f6f6f6")},stop:function(e,t){t.item.removeAttr("style")},update:function(){var t="";a("#product_images_container").find("ul li.image").css("cursor","default").each(function(){var e=a(this).attr("data-attachment_id");t=t+e+","}),r.val(t)}}),a("#product_images_container").on("click","a.delete",function(){a(this).closest("li.image").remove();var t="";return a("#product_images_container").find("ul li.image").css("cursor","default").each(function(){var e=a(this).attr("data-attachment_id");t=t+e+","}),r.val(t),a("#tiptip_holder").removeAttr("style"),a("#tiptip_arrow").removeAttr("style"),!1})})},{}]},{},[1]);